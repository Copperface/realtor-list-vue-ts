(function(e){function t(t){for(var n,s,l=t[0],o=t[1],c=t[2],d=0,f=[];d<l.length;d++)s=l[d],r[s]&&f.push(r[s][0]),r[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb718","./de-ch.js":"bb718","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id="4678"},cd49:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("SideMenu"),a("AppHeader"),a("v-content",{attrs:{app:""}},[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1),a("AppFooter")],1)},i=[],s=a("d225"),l=a("308d"),o=a("6bb5"),c=a("4e2b"),u=a("9ab4"),d=a("2fe1"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{staticClass:"primary",attrs:{app:"",dark:""}},[a("v-toolbar-side-icon",{staticClass:"hidden-md-and-up",on:{click:e.handleClickShowSideMenu}}),a("v-toolbar-title",[e._v("Список риэлторов")]),a("v-spacer"),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("v-btn",{attrs:{flat:"",to:"/card/create"}},[a("v-icon",{attrs:{left:""}},[e._v("create")]),e._v("Новый риэлтор\n    ")],1),a("v-btn",{attrs:{flat:"",to:"/"}},[a("v-icon",{attrs:{left:""}},[e._v("list")]),e._v("Список риэлторов\n    ")],1)],1),e.showSearchField?a("v-text-field",{staticClass:"xs12 sm12 md4",attrs:{autofocus:"",light:"",placeholder:"Поиск...","append-icon":"search","hide-details":"",solo:""},on:{blur:e.handleBlurSearchField,"click:append":e.handleClickSearchField,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleClickSearchField(t)}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}):a("v-btn",{attrs:{icon:""},on:{click:e.handleClickShowSearch}},[a("v-icon",[e._v("search")])],1)],1)},h=[],b=a("b0b4"),v=new n["a"],m=v,p=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.showSideMenu=!0,e.showSearchField=!1,e.searchQuery="",e}return Object(c["a"])(t,e),Object(b["a"])(t,[{key:"handleClickShowSearch",value:function(){this.showSearchField=!0}},{key:"handleBlurSearchField",value:function(){this.showSearchField=!1}},{key:"handleClickSearchField",value:function(){this.searchQuery&&this.$router.push({path:"/",query:{search:this.searchQuery}}),this.showSearchField=!1,this.searchQuery=""}},{key:"handleClickShowSideMenu",value:function(){m.$emit("clickShowSideMenu")}}]),t}(n["a"]);p=u["a"]([Object(d["b"])({})],p);var j=p,y=j,k=a("2877"),D=a("6544"),g=a.n(D),S=a("8336"),w=a("132d"),_=a("9910"),C=a("2677"),O=a("71d9"),x=a("2a7f"),Y=a("706c"),M=Object(k["a"])(y,f,h,!1,null,null,null),T=M.exports;g()(M,{VBtn:S["a"],VIcon:w["a"],VSpacer:_["a"],VTextField:C["a"],VToolbar:O["a"],VToolbarItems:x["a"],VToolbarSideIcon:Y["a"],VToolbarTitle:x["b"]});var V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-bottom-nav",{staticClass:"primary",attrs:{value:!0,dark:"",absolute:"",app:""}},[a("v-btn",{attrs:{to:"/card/create",dark:""}},[a("span",[e._v("Новый риэлтор")]),a("v-icon",[e._v("create")])],1),a("v-btn",{attrs:{to:"/",dark:""}},[a("span",[e._v("Список риэлторов")]),a("v-icon",[e._v("list")])],1)],1)},U=[],F=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(n["a"]);F=u["a"]([Object(d["b"])({})],F);var R=F,E=R,L=a("887a"),q=Object(k["a"])(E,V,U,!1,null,null,null),z=q.exports;g()(q,{VBottomNav:L["a"],VBtn:S["a"],VIcon:w["a"]});var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:e.showSideMenu,callback:function(t){e.showSideMenu=t},expression:"showSideMenu"}},[a("v-list",{staticClass:"pa-1"},[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v("Список риэлторов")])],1)],1)],1),a("v-list",{staticClass:"pt-0",attrs:{dense:""}},[a("v-divider"),e._l(e.MENU_ITEMS,function(t){return a("v-list-tile",{key:t.title,attrs:{to:t.to}},[a("v-list-tile-action",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)})],2)],1)},$=[],P=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.MENU_ITEMS=[{title:"Новый риэлтор",icon:"create",to:"/card/create"},{title:"Список риэлторов",icon:"list",to:"/"}],e.showSideMenu=!1,e}return Object(c["a"])(t,e),Object(b["a"])(t,[{key:"created",value:function(){var e=this;m.$on("clickShowSideMenu",function(){e.toggleSideMenu()})}},{key:"toggleSideMenu",value:function(){this.showSideMenu=!this.showSideMenu}}]),t}(n["a"]);P=u["a"]([Object(d["b"])({})],P);var A=P,I=A,Q=a("ce7e6"),N=a("8860"),G=a("ba95"),H=a("40fe"),J=a("5d23"),K=a("f774"),W=Object(k["a"])(I,B,$,!1,null,null,null),Z=W.exports;g()(W,{VDivider:Q["a"],VIcon:w["a"],VList:N["a"],VListTile:G["a"],VListTileAction:H["a"],VListTileContent:J["a"],VListTileTitle:J["b"],VNavigationDrawer:K["a"]});var X=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(n["a"]);X=u["a"]([Object(d["b"])({components:{AppHeader:T,AppFooter:z,SideMenu:Z}})],X);var ee=X,te=ee,ae=a("7496"),ne=a("a523"),re=a("549c"),ie=Object(k["a"])(te,r,i,!1,null,null,null),se=ie.exports;g()(ie,{VApp:ae["a"],VContainer:ne["a"],VContent:re["a"]});var le=a("8c4f"),oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-end":""}},[a("v-flex",{attrs:{xs12:"",lg2:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Дата регистрации с:",readonly:"","append-icon":e.formatedSinceDate&&"close"},on:{"click:append":e.handleClickClearSinceDate},model:{value:e.formatedSinceDate,callback:function(t){e.formatedSinceDate=t},expression:"formatedSinceDate"}},n))]}}]),model:{value:e.showSinceDate,callback:function(t){e.showSinceDate=t},expression:"showSinceDate"}},[a("v-date-picker",{attrs:{locale:"ru-RU","no-title":""},model:{value:e.sinceDate,callback:function(t){e.sinceDate=t},expression:"sinceDate"}})],1)],1),a("v-flex",{attrs:{xs12:"",lg2:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Дата регистрации по:",readonly:"","append-icon":e.formatedTillDate&&"close"},on:{"click:append":e.handleClickClearTillDate},model:{value:e.formatedTillDate,callback:function(t){e.formatedTillDate=t},expression:"formatedTillDate"}},n))]}}]),model:{value:e.showTillDate,callback:function(t){e.showTillDate=t},expression:"showTillDate"}},[a("v-date-picker",{attrs:{locale:"ru-RU","no-title":""},model:{value:e.tillDate,callback:function(t){e.tillDate=t},expression:"tillDate"}})],1)],1),a("v-flex",{attrs:{xs12:"",lg2:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Поиск по фамилии","single-line":"","hide-details":"",clearable:""},on:{"click:append":e.handleAppendSurnameFilter,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAppendSurnameFilter(t)},"click:clear":e.handleClearSurnameFilter},model:{value:e.surnameFilter,callback:function(t){e.surnameFilter=t},expression:"surnameFilter"}})],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.TABLE_HEADERS,items:e.realtorsData,"item-key":"guid"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-right",on:{dblclick:function(){return e.handleDBLClickTableRow(t.item.id)}}},[e._v(e._s(t.item.surname))]),a("td",{staticClass:"text-xs-right",on:{dblclick:function(){return e.handleDBLClickTableRow(t.item.id)}}},[e._v(e._s(t.item.name))]),a("td",{staticClass:"text-xs-right",on:{dblclick:function(){return e.handleDBLClickTableRow(t.item.id)}}},[e._v(e._s(t.item.unit.name))]),a("td",{staticClass:"text-xs-right",on:{dblclick:function(){return e.handleDBLClickTableRow(t.item.id)}}},[e._v(e._s(t.item.register_date))])]}}]),model:{value:e.realtorsData,callback:function(t){e.realtorsData=t},expression:"realtorsData"}})],1)},ce=[],ue=(a("7f7f"),a("6762"),a("2fdb"),a("386d"),a("75fc")),de=(a("7514"),a("768b")),fe=(a("ac6a"),a("5df3"),a("cebc")),he=a("60a3"),be=a("c1df"),ve=a.n(be),me=a("8aa5"),pe=a.n(me),je={apiKey:"AIzaSyDKrlMM7nREvF7CJ1vavm8OwJ9MFBSYW0U",authDomain:"realtor-list.firebaseapp.com",databaseURL:"https://realtor-list.firebaseio.com",projectId:"realtor-list",storageBucket:"realtor-list.appspot.com",messagingSenderId:"96455463416",appId:"1:96455463416:web:e17b124424660c7e"},ye=pe.a.initializeApp(je).database(),ke=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.TABLE_HEADERS=[{text:"Фамилия",value:"surname",align:"center"},{text:"Имя",value:"name",align:"center"},{text:"Подразделение",value:"uid",align:"center"},{text:"Дата регистрации",value:"register_date",align:"center"}],e.realtorsData=[],e.surnameFilter=e.query.surname||"",e.showSinceDate=!1,e.sinceDate=e.query.date_since&&ve()(e.query.date_since,"DD.MM.YYYY").isValid()?ve()(e.query.date_since,"DD.MM.YYYY").format("YYYY-MM-DD"):"",e.showTillDate=!1,e.tillDate=e.query.date_till&&ve()(e.query.date_till,"DD.MM.YYYY").isValid()?ve()(e.query.date_till,"DD.MM.YYYY").format("YYYY-MM-DD"):"",e}return Object(c["a"])(t,e),Object(b["a"])(t,[{key:"handleClickClearSinceDate",value:function(){this.sinceDate=""}},{key:"onFormatedSinceDateChange",value:function(){this.$router.push({path:"/",query:Object(fe["a"])({},this.query,{date_since:this.formatedSinceDate})})}},{key:"handleClickClearTillDate",value:function(){this.tillDate=""}},{key:"onFormatedTillDateChange",value:function(){this.$router.push({path:"/",query:Object(fe["a"])({},this.query,{date_till:this.formatedTillDate})})}},{key:"onQueryChanged",value:function(){this.initComponent()}},{key:"mounted",value:function(){this.initComponent()}},{key:"initComponent",value:function(){var e=this;this.getData().then(function(t){e.realtorsData=e.filterData(t,e.query)})}},{key:"getData",value:function(){var e=this;return new Promise(function(t,a){Promise.all([e.getUnits(),e.getRealtors()]).then(function(e){var a=Object(de["a"])(e,2),n=a[0],r=a[1];t(r.map(function(e){return Object(fe["a"])({},e,{unit:n.find(function(t){return t.id===e.uid})||{id:0,name:"",register_date:""}})}))})})}},{key:"getUnits",value:function(){return new Promise(function(e){ye.ref("Units").on("value",function(t){e(t.val())})})}},{key:"getRealtors",value:function(){return new Promise(function(e){ye.ref("Realtors").on("value",function(t){e(t.val())})})}},{key:"filterData",value:function(e,t){var a=Object(ue["a"])(e);return a=this.clearUndefined(a),t.surname&&(a=this.filterBySurname(a,t.surname)),t.date_since&&ve()(t.date_since,"DD.MM.YYYY").isValid()&&(a=this.filterByDateSince(a,t.date_since)),t.date_till&&ve()(t.date_till,"DD.MM.YYYY").isValid()&&(a=this.filterByDateTill(a,t.date_till)),t.search&&(a=this.filterBySearch(a,t.search)),a}},{key:"clearUndefined",value:function(e){return e.filter(function(e){return e})}},{key:"filterBySearch",value:function(e,t){return e.filter(function(e){return e.surname.toLowerCase().includes(t.toLowerCase())||e.name.toLowerCase().includes(t.toLowerCase())||e.unit.name.toLowerCase().includes(t.toLowerCase())})}},{key:"filterBySurname",value:function(e,t){return e.filter(function(e){return e.surname.toLowerCase().includes(t.toLowerCase())})}},{key:"filterByDateSince",value:function(e,t){return e.filter(function(e){return ve()(e.register_date,"DD.MM.YYYY")>=ve()(t,"DD.MM.YYYY")})}},{key:"filterByDateTill",value:function(e,t){return e.filter(function(e){return ve()(e.register_date,"DD.MM.YYYY")<=ve()(t,"DD.MM.YYYY")})}},{key:"handleAppendSurnameFilter",value:function(){this.surnameFilter&&this.$router.push({path:"/",query:Object(fe["a"])({},this.query,{surname:this.surnameFilter})}),this.query.surname&&!this.surnameFilter&&this.handleClearSurnameFilter()}},{key:"handleClearSurnameFilter",value:function(){this.$router.push({path:"/",query:Object(fe["a"])({},this.query,{surname:""})})}},{key:"handleDBLClickTableRow",value:function(e){this.$router.push({path:"/card/edit/"+e})}},{key:"formatedSinceDate",get:function(){return this.sinceDate?ve()(this.sinceDate).format("DD.MM.YYYY"):""}},{key:"formatedTillDate",get:function(){return this.tillDate?ve()(this.tillDate).format("DD.MM.YYYY"):""}}]),t}(he["c"]);u["a"]([Object(he["b"])({default:{search:"",surname:"",date_since:"",date_till:""}})],ke.prototype,"query",void 0),u["a"]([Object(he["d"])("formatedSinceDate")],ke.prototype,"onFormatedSinceDateChange",null),u["a"]([Object(he["d"])("formatedTillDate")],ke.prototype,"onFormatedTillDateChange",null),u["a"]([Object(he["d"])("query")],ke.prototype,"onQueryChanged",null),ke=u["a"]([Object(he["a"])({})],ke);var De=ke,ge=De,Se=a("b0af"),we=a("12b2"),_e=a("8fea"),Ce=a("2e4b"),Oe=a("0e8f"),xe=a("a722"),Ye=a("e449"),Me=Object(k["a"])(ge,oe,ce,!1,null,null,null),Te=Me.exports;g()(Me,{VCard:Se["a"],VCardTitle:we["a"],VContainer:ne["a"],VDataTable:_e["a"],VDatePicker:Ce["a"],VFlex:Oe["a"],VLayout:xe["a"],VMenu:Ye["a"],VTextField:C["a"]});var Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[a("v-text-field",{attrs:{rules:[e.RULES.required,e.RULES.name,e.RULES.counter],label:"Фамилия"},model:{value:e.realtor.surname,callback:function(t){e.$set(e.realtor,"surname",t)},expression:"realtor.surname"}}),a("v-text-field",{attrs:{rules:[e.RULES.required,e.RULES.name,e.RULES.counter],label:"Имя"},model:{value:e.realtor.name,callback:function(t){e.$set(e.realtor,"name",t)},expression:"realtor.name"}}),a("v-select",{attrs:{"item-text":"name","return-object":"",items:e.units,label:"Подразделение",required:""},model:{value:e.selectedUnit,callback:function(t){e.selectedUnit=t},expression:"selectedUnit"}}),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Дата регистрации",readonly:"",required:""},model:{value:e.formatedRegisterDate,callback:function(t){e.formatedRegisterDate=t},expression:"formatedRegisterDate"}},n))]}}]),model:{value:e.showDatePicker,callback:function(t){e.showDatePicker=t},expression:"showDatePicker"}},[a("v-date-picker",{attrs:{locale:"ru-RU","no-title":""},model:{value:e.registerDate,callback:function(t){e.registerDate=t},expression:"registerDate"}})],1),a("v-btn",{attrs:{disabled:!e.formValid,color:"green"},on:{click:e.handleClickSaveData}},[e._v("Сохранить")]),e.isEdit?a("v-btn",{attrs:{color:"red"},on:{click:e.handleClickDeleteUser}},[e._v("Удалить")]):e._e()],1)},Ue=[],Fe=(a("456d"),a("f029")),Re=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.RULES={required:function(e){return!!e||"Значение не может быть пустым."},counter:function(e){return e.length<=20||"Не более 20 символов"},name:function(e){var t=/^[А-ЯA-Z][а-яёa-z]+$/;return t.test(e)||"Должно содержать русские или латинские и начинаться с заглавной"}},e.units=[],e.realtor={id:0,guid:"",name:"",surname:"",register_date:"",uid:0},e.selectedUnit={id:0,name:"",register_date:""},e.formValid=!0,e.showDatePicker=!1,e.registerDate="",e}return Object(c["a"])(t,e),Object(b["a"])(t,[{key:"onFormatedRegisterDateChange",value:function(){this.realtor=Object(fe["a"])({},this.realtor,{register_date:this.formatedRegisterDate})}},{key:"onSelectedUnitChange",value:function(){this.realtor=Object(fe["a"])({},this.realtor,{uid:this.selectedUnit.id})}},{key:"onQueryChanged",value:function(){this.isEdit&&this.initComponentEdit()}},{key:"mounted",value:function(){this.isEdit&&this.initComponentEdit(),this.isCreate&&this.initComponentCreate()}},{key:"initComponentEdit",value:function(){var e=this;Promise.all([this.getUnits(),this.getRealtor()]).then(function(t){var a=Object(de["a"])(t,2),n=a[0],r=a[1];e.units=n,e.realtor=r,e.selectedUnit=e.units.find(function(t){return t.id==e.realtor.uid})||{id:0,name:"",register_date:""},e.registerDate=ve()(e.realtor.register_date,"DD.MM.YYYY").format("YYYY-MM-DD")})}},{key:"initComponentCreate",value:function(){var e=this;this.getUnits().then(function(t){e.units=t,e.selectedUnit=e.units[0]}),this.setNextID(),this.realtor=this.generateGUID(this.realtor),this.registerDate=ve()().format("YYYY-MM-DD")}},{key:"getUnits",value:function(){return new Promise(function(e){ye.ref("Units").on("value",function(t){e(t.val())})})}},{key:"getRealtor",value:function(){var e=this;return new Promise(function(t){ye.ref("Realtors/"+e.id).on("value",function(e){t(e.val())})})}},{key:"setNextID",value:function(){var e=this;ye.ref("Realtors").orderByChild("id").limitToLast(1).once("value",function(t){e.realtor=Object(fe["a"])({},e.realtor,{id:+Object.keys(t.val())[0]+1})})}},{key:"generateGUID",value:function(e){return Object(fe["a"])({},e,{guid:Fe["a"].v1()})}},{key:"updateUserData",value:function(e){var t=this;ye.ref("Realtors/"+this.id).update(this.realtor,function(){t.$router.push({path:"/"})})}},{key:"createUser",value:function(e){var t=this;ye.ref("Realtors/"+e.id).set(this.realtor,function(){t.$router.push({path:"/"})})}},{key:"deleteUser",value:function(e){var t=this;ye.ref("Realtors/"+this.id).remove(function(){t.$router.push({path:"/"})})}},{key:"handleClickSaveData",value:function(){this.$refs.form.validate()&&(this.isEdit&&this.updateUserData(this.realtor),this.isCreate&&this.createUser(this.realtor))}},{key:"handleClickDeleteUser",value:function(){var e=window.confirm("Вы действительно хотите удалить?");e&&this.deleteUser(this.id)}},{key:"formatedRegisterDate",get:function(){return this.registerDate?ve()(this.registerDate).format("DD.MM.YYYY"):""}},{key:"isEdit",get:function(){return"edit"===this.method}},{key:"isCreate",get:function(){return"create"===this.method}}]),t}(he["c"]);u["a"]([Object(he["b"])({default:"0"})],Re.prototype,"id",void 0),u["a"]([Object(he["b"])(String)],Re.prototype,"method",void 0),u["a"]([Object(he["d"])("formatedRegisterDate")],Re.prototype,"onFormatedRegisterDateChange",null),u["a"]([Object(he["d"])("selectedUnit")],Re.prototype,"onSelectedUnitChange",null),u["a"]([Object(he["d"])("query")],Re.prototype,"onQueryChanged",null),Re=u["a"]([Object(he["a"])({})],Re);var Ee=Re,Le=Ee,qe=a("4bd4"),ze=a("b56d"),Be=Object(k["a"])(Le,Ve,Ue,!1,null,null,null),$e=Be.exports;g()(Be,{VBtn:S["a"],VDatePicker:Ce["a"],VForm:qe["a"],VMenu:Ye["a"],VSelect:ze["a"],VTextField:C["a"]}),n["a"].use(le["a"]);var Pe=new le["a"]({routes:[{path:"/",name:"RealtorsList",component:Te,props:function(e){return{query:e.query}}},{path:"/card/:method/:id?",name:"RealtorCard",component:$e,props:!0}]}),Ae=a("bb71");a("da64");n["a"].use(Ae["a"],{iconfont:"md"}),n["a"].config.productionTip=!1,new n["a"]({router:Pe,render:function(e){return e(se)}}).$mount("#app")}});
//# sourceMappingURL=app.223d6f8b.js.map